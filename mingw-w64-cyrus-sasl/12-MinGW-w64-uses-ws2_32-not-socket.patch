--- cyrus-sasl-2.1.26/cmulocal/bsd_sockets.m4.orig	2014-08-10 15:54:36.482547200 +0100
+++ cyrus-sasl-2.1.26/cmulocal/bsd_sockets.m4	2014-08-10 15:55:32.781767300 +0100
@@ -8,7 +8,9 @@
 
 AC_DEFUN([CMU_SOCKETS], [
 	save_LIBS="$LIBS"
-	LIB_SOCKET=""
+	AC_SEARCH_LIBS([socket], [c socket ws2_32],
+	[LIB_SOCKET=${ac_cv_search_socket}],
+	[LIB_SOCKET=-lsocket])
 	AC_CHECK_FUNC(connect, :,
 		[AC_CHECK_LIB(nsl, gethostbyname,
 			     LIB_SOCKET="-lnsl $LIB_SOCKET")
