--- ilmbase-2.1.0/CMakeLists.txt.orig	2014-05-28 14:46:01.760200000 +0400
+++ ilmbase-2.1.0/CMakeLists.txt	2014-05-28 22:42:50.512800000 +0400
@@ -20,7 +20,7 @@
 # Allow the developer to select if Dynamic or Static libraries are built
 OPTION (BUILD_SHARED_LIBS "Build Shared Libraries" ON)
 
-IF ( NOT WIN32)
+IF ( NOT WIN32 OR MINGW)
   ADD_DEFINITIONS ( -pthread )
 ENDIF ()
 
@@ -96,7 +96,7 @@
 ADD_SUBDIRECTORY ( Imath )
 ADD_SUBDIRECTORY ( IlmThread )
 
-IF (WIN32)
+IF (WIN32 AND NOT MINGW)
   FILE ( COPY ${CMAKE_SOURCE_DIR}/config.windows/IlmBaseConfig.h
     DESTINATION ${CMAKE_SOURCE_DIR}/config
     )
@@ -127,35 +127,46 @@
                              (ILMBASE_VERSION_PATCH <<  8))
 ")
 
-
+SET(SO_VERSION "11")
 SET_TARGET_PROPERTIES ( Half
   PROPERTIES
   VERSION 11.0.0
   SOVERSION 11
+  OUTPUT_NAME Half
+  RUNTIME_OUTPUT_NAME "Half-${SO_VERSION}"
+  ARCHIVE_OUTPUT_NAME Half
   )
 SET_TARGET_PROPERTIES ( Iex
   PROPERTIES
   VERSION 11.0.0
   SOVERSION 11
-  OUTPUT_NAME "Iex-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}"
+  OUTPUT_NAME Iex
+  RUNTIME_OUTPUT_NAME "Iex-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}-${SO_VERSION}"
+  ARCHIVE_OUTPUT_NAME Iex
   )
 SET_TARGET_PROPERTIES ( Imath
   PROPERTIES
   VERSION 11.0.0
   SOVERSION 11
-  OUTPUT_NAME "Imath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}"
+  OUTPUT_NAME Imath
+  RUNTIME_OUTPUT_NAME "Imath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}-${SO_VERSION}"
+  ARCHIVE_OUTPUT_NAME Imath
   )
 SET_TARGET_PROPERTIES ( IlmThread
   PROPERTIES
   VERSION 11.0.0
   SOVERSION 11
-  OUTPUT_NAME "IlmThread-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}"
+  OUTPUT_NAME IlmThread
+  RUNTIME_OUTPUT_NAME "IlmThread-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}-${SO_VERSION}"
+  ARCHIVE_OUTPUT_NAME IlmThread
   )
 SET_TARGET_PROPERTIES ( IexMath
   PROPERTIES
   VERSION 11.0.0
   SOVERSION 11
-  OUTPUT_NAME "IexMath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}"
+  OUTPUT_NAME IexMath
+  RUNTIME_OUTPUT_NAME "IexMath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR}-${SO_VERSION}"
+  ARCHIVE_OUTPUT_NAME IexMath
   )
 
 IF ( NOT WIN32 )
@@ -190,7 +201,8 @@
 Name: IlmBase
 Description: Base math and exception libraries
 Version: ${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}
-Libs: -L\${libdir} -lImath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR} -lIexMath-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR} -lHalf -lIex-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR} -lIlmThread-${CPACK_PACKAGE_VERSION_MAJOR}_${CPACK_PACKAGE_VERSION_MINOR} -pthreadCflags: -pthread -I\${OpenEXR_includedir}
+Libs: -L\${libdir} -lImath -lIexMath -lHalf -lIex -lIlmThread -pthread
+Cflags: -pthread -I\${OpenEXR_includedir}
 ")
 
 INSTALL ( FILES
--- ilmbase-2.1.0/IlmThread/CMakeLists.txt.orig	2014-05-28 14:46:01.760200000 +0400
+++ ilmbase-2.1.0/IlmThread/CMakeLists.txt	2014-05-28 22:42:50.512800000 +0400
@@ -10,7 +10,7 @@
   IlmThreadSemaphorePosixCompat.cpp
   IlmThreadSemaphorePosix.cpp
 )
-IF (WIN32)
+IF (WIN32 AND NOT MINGW)
   SET( ILMTHREAD_LIBRARY_SOURCES ${ILMTHREAD_LIBRARY_SOURCES}
     IlmThreadMutexWin32.cpp
     IlmThreadSemaphoreWin32.cpp
