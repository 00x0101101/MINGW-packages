# Maintainer: Haroogan <Haroogan@gmail.com>

_realname='conemu'
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=150420
pkgrel=1
pkgdesc="Customizable Windows console emulator with tabs (mingw-w64)"
url="http://code.google.com/p/${_realname}-maximus5/"
license=('BSD New')
arch=('any')
# CAUTION:
# Don't remove `!strip' option!  Otherwise, 64-bit version of ConEmu will signal
# errors at startup.
options=('!strip')
source=("http://downloads.sourceforge.net/project/${_realname}/Preview/ConEmuPack.${pkgver}.7z"
        'ConEmu.xml')
sha256sums=('f6ab9e22dfa32cbed1ac84cd5b300e61f2fd305567cbc9813c36ccd33fb66bd2'
            '84c201cf676aae844a5c00b20ce8912f004562422a3e340fe01c786ab666062c')

package() {
  local suffix=''

  if test "${CARCH}" == 'x86_64'; then
    suffix='64'
  fi

  mkdir -p "${pkgdir}${MINGW_PREFIX}/bin"

  cp -r "ConEmu.xml"          "${pkgdir}${MINGW_PREFIX}/bin/"
  cp -r "ConEmu${suffix}.exe" "${pkgdir}${MINGW_PREFIX}/bin/ConEmu.exe"

  cd "ConEmu"

  cp -r ConEmuC*.exe  "${pkgdir}${MINGW_PREFIX}/bin/"
  cp -r ConEmuCD*.dll "${pkgdir}${MINGW_PREFIX}/bin/"
  cp -r ConEmuHk*.dll "${pkgdir}${MINGW_PREFIX}/bin/"
}
