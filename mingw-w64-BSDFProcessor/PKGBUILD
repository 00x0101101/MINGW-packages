# Maintainer: Marko KÃ¤ning <mk-lists@mailbox.org>

pkgname=("BSDFProcessor")
pkgver=1.1.2
pkgrel=1
epoch=
pkgdesc="Application for displaying and editing of BSDF files (science)"
arch=("i686" "x86_64")
url="https://github.com/KimuraRyo/BSDFProcessor"
license=('Mozilla Public License, version 2.0')
groups=('science')
makedepends=("${MINGW_PACKAGE_PREFIX}-cmake" "${MINGW_PACKAGE_PREFIX}-gcc" "${MINGW_PACKAGE_PREFIX}-eigen3" "${MINGW_PACKAGE_PREFIX}-libbsdf" "${MINGW_PACKAGE_PREFIX}-qt5" "${MINGW_PACKAGE_PREFIX}-OpenSceneGraph")
source=("${pkgname}"::"https://github.com/KimuraRyo/${pkgname}/archive/v${pkgver}.tar.gz")
sha256sums=('66e6ffe33f5eca7540a6a51bbc66e905a623a3bb183dd7ad9738990168ffb1fa')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  [[ -d build-${MINGW_CHOST} ]] && rm -rf build-${MINGW_CHOST}
  mkdir build-${MINGW_CHOST}
  cd build-${MINGW_CHOST}
  cmake -G"MSYS Makefiles" -DEIGEN3_INCLUDE_DIR=${MINGW_PREFIX}/include/eigen3 -DCMAKE_CXX_FLAGS=-std=c++11 ..
  mingw32-make
}

package() {
  groups=('science')

#  mkdir -p ${pkgdir}${MINGW_PREFIX}/share/licenses/libbsdf
#  cp -f "${srcdir}"/${pkgname}-${pkgver}/LICENSE ${pkgdir}${MINGW_PREFIX}/share/licenses/libbsdf

#  mkdir -p ${pkgdir}${MINGW_PREFIX}/include
#  cp -rf "${srcdir}"/${pkgname}-${pkgver}/include/libbsdf ${pkgdir}${MINGW_PREFIX}/include/

#  mkdir -p ${pkgdir}${MINGW_PREFIX}/lib
#  cp -f "${srcdir}"/${pkgname}-${pkgver}/build-${MINGW_CHOST}/liblibbsdf.a ${pkgdir}${MINGW_PREFIX}/lib/
}
