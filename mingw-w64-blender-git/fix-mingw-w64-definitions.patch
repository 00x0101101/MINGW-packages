diff -Naur blender/extern/libmv/libmv/numeric/numeric.h blender-pp/extern/libmv/libmv/numeric/numeric.h
--- blender/extern/libmv/libmv/numeric/numeric.h	2014-01-14 00:28:25.432800000 +0400
+++ blender-pp/extern/libmv/libmv/numeric/numeric.h	2014-01-13 22:43:39.223000000 +0400
@@ -33,7 +33,7 @@
 #include <Eigen/QR>
 #include <Eigen/SVD>
 
-#if !defined(__MINGW64__)
+#if !defined(__MINGW64_VERSION_MAJOR)
 #  if defined(_WIN32) || defined(__APPLE__) || \
       defined(__FreeBSD__) || defined(__NetBSD__)
 static void sincos(double x, double *sinx, double *cosx) {
@@ -41,7 +41,7 @@
   *cosx = cos(x);
 }
 #  endif
-#endif  // !__MINGW64__
+#endif  // !__MINGW64_VERSION_MAJOR
 
 #if (defined(WIN32) || defined(WIN64)) && !defined(__MINGW32__)
 inline long lround(double d) {
diff -Naur blender/extern/libmv/third_party/glog/src/windows/port.cc blender-pp/extern/libmv/third_party/glog/src/windows/port.cc
--- blender/extern/libmv/third_party/glog/src/windows/port.cc	2014-01-14 00:28:25.698000000 +0400
+++ blender-pp/extern/libmv/third_party/glog/src/windows/port.cc	2014-01-13 22:43:45.868600000 +0400
@@ -56,7 +56,7 @@
 }
 
 // MinGW64 defines
-#ifndef __MINGW64__
+#ifndef __MINGW64_VERSION_MAJOR
 int snprintf(char *str, size_t size, const char *format, ...) {
   va_list ap;
   va_start(ap, format);
diff -Naur blender/extern/libmv/third_party/glog/src/windows/port.h blender-pp/extern/libmv/third_party/glog/src/windows/port.h
--- blender/extern/libmv/third_party/glog/src/windows/port.h	2014-01-14 00:28:25.698000000 +0400
+++ blender-pp/extern/libmv/third_party/glog/src/windows/port.h	2014-01-13 23:26:29.962200000 +0400
@@ -123,18 +123,19 @@
 #define DEFAULT_TEMPLATE_ROOTDIR  ".."
 
 // ----------------------------------- SYSTEM/PROCESS
-#ifndef __MINGW64__
+#ifndef __MINGW64_VERSION_MAJOR
 typedef int pid_t;
-#endif
 #define getpid  _getpid
 
 // ----------------------------------- THREADS
+// #ifndef __MINGW64_VERSION_MAJOR
 typedef DWORD pthread_t;
 typedef DWORD pthread_key_t;
 typedef LONG pthread_once_t;
 enum { PTHREAD_ONCE_INIT = 0 };   // important that this be 0! for SpinLock
 #define pthread_self  GetCurrentThreadId
 #define pthread_equal(pthread_t_1, pthread_t_2)  ((pthread_t_1)==(pthread_t_2))
+// #endif
 
 inline struct tm* localtime_r(const time_t* timep, struct tm* result) {
 #if __MINGW32__
@@ -152,6 +153,7 @@
   return result;
 #endif
 }
+#endif
 
 inline char* strerror_r(int errnum, char* buf, size_t buflen) {
 #if __MINGW32__
diff -Naur blender/intern/cycles/util/util_types.h blender-pp/intern/cycles/util/util_types.h
--- blender/intern/cycles/util/util_types.h	2014-01-14 00:28:26.259600000 +0400
+++ blender-pp/intern/cycles/util/util_types.h	2014-01-13 21:47:15.077600000 +0400
@@ -48,7 +48,7 @@
 #define ccl_may_alias
 #else
 #define ccl_device_inline static inline __attribute__((always_inline))
-#ifndef FREE_WINDOWS64
+#ifndef __MINGW64_VERSION_MAJOR
 #define __forceinline inline __attribute__((always_inline))
 #endif
 #define ccl_align(...) __attribute__((aligned(__VA_ARGS__)))
diff -Naur blender/intern/ghost/intern/GHOST_SystemWin32.cpp blender-pp/intern/ghost/intern/GHOST_SystemWin32.cpp
--- blender/intern/ghost/intern/GHOST_SystemWin32.cpp	2014-01-14 00:28:26.368800000 +0400
+++ blender-pp/intern/ghost/intern/GHOST_SystemWin32.cpp	2014-01-13 21:47:15.062000000 +0400
@@ -828,7 +828,7 @@
 	// send motion. Mark as 'sent' so motion will always get dispatched.
 	eventSent = true;
 
-#if defined(_MSC_VER) || defined(FREE_WINDOWS64)
+#if defined(_MSC_VER) || defined(FREE_WINDOWS64) || defined(__MINGW64_VERSION_MAJOR)
 	// using Microsoft compiler & header files
 	// they invented the RawInput API, so this version is (probably) correct.
 	// MinGW64 also works fine with this
diff -Naur blender/intern/ghost/intern/GHOST_SystemWin32.h blender-pp/intern/ghost/intern/GHOST_SystemWin32.h
--- blender/intern/ghost/intern/GHOST_SystemWin32.h	2014-01-14 00:28:26.368800000 +0400
+++ blender-pp/intern/ghost/intern/GHOST_SystemWin32.h	2014-01-13 23:06:58.418200000 +0400
@@ -37,7 +37,7 @@
 #error WIN32 only!
 #endif // WIN32
 
-#ifndef __MINGW64__
+#ifndef __MINGW64_VERSION_MAJOR
 #define _WIN32_WINNT 0x501 // require Windows XP or newer
 #endif
 #define WIN32_LEAN_AND_MEAN
diff -Naur blender/intern/ghost/intern/GHOST_TaskbarWin32.h blender-pp/intern/ghost/intern/GHOST_TaskbarWin32.h
--- blender/intern/ghost/intern/GHOST_TaskbarWin32.h	2014-01-14 00:28:26.384400000 +0400
+++ blender-pp/intern/ghost/intern/GHOST_TaskbarWin32.h	2014-01-13 23:07:29.306200000 +0400
@@ -8,7 +8,7 @@
 #error WIN32 only!
 #endif // WIN32
 
-#ifndef __MINGW64__
+#ifndef __MINGW64_VERSION_MAJOR
 #define _WIN32_WINNT 0x501 // require Windows XP or newer
 #endif
 #define WIN32_LEAN_AND_MEAN
diff -Naur blender/intern/ghost/intern/GHOST_WindowWin32.cpp blender-pp/intern/ghost/intern/GHOST_WindowWin32.cpp
--- blender/intern/ghost/intern/GHOST_WindowWin32.cpp	2014-01-14 00:28:26.384400000 +0400
+++ blender-pp/intern/ghost/intern/GHOST_WindowWin32.cpp	2014-01-13 21:47:15.077600000 +0400
@@ -29,6 +29,11 @@
  *  \ingroup GHOST
  */
 
+// Need glew for some defines
+#include <GL/glew.h>
+#include <GL/wglew.h>
+#include <math.h>
+
 #include <string.h>
 #include "GHOST_WindowWin32.h"
 #include "GHOST_SystemWin32.h"
@@ -36,11 +41,6 @@
 #include "utfconv.h"
 #include "utf_winfunc.h"
 
-// Need glew for some defines
-#include <GL/glew.h>
-#include <GL/wglew.h>
-#include <math.h>
-
 // MSVC6 still doesn't define M_PI
 #ifndef M_PI
 #  define M_PI 3.1415926536
diff -Naur blender/intern/ghost/intern/GHOST_WindowWin32.h blender-pp/intern/ghost/intern/GHOST_WindowWin32.h
--- blender/intern/ghost/intern/GHOST_WindowWin32.h	2014-01-14 00:28:26.384400000 +0400
+++ blender-pp/intern/ghost/intern/GHOST_WindowWin32.h	2014-01-13 23:07:51.926200000 +0400
@@ -40,7 +40,7 @@
 #include "GHOST_Window.h"
 #include "GHOST_TaskbarWin32.h"
 
-#ifndef __MINGW64__
+#ifndef __MINGW64_VERSION_MAJOR
 #define _WIN32_WINNT 0x501 // require Windows XP or newer
 #endif
 #define WIN32_LEAN_AND_MEAN
diff -Naur blender/source/blender/blenlib/BLI_winstuff.h blender-pp/source/blender/blenlib/BLI_winstuff.h
--- blender/source/blender/blenlib/BLI_winstuff.h	2014-01-14 00:28:29.052000000 +0400
+++ blender-pp/source/blender/blenlib/BLI_winstuff.h	2014-01-13 21:47:15.062000000 +0400
@@ -92,7 +92,9 @@
 #endif
 
 /* defines for using ISO C++ conformant names */
+#ifndef __MINGW32__
 #define snprintf _snprintf
+#endif
 
 #if defined(_MSC_VER) || (defined(FREE_WINDOWS) && !defined(FREE_WINDOWS64))
 #  define	R_OK	4
@@ -115,9 +117,9 @@
 #  define tell(fd) _telli64(fd)
 #endif
 
-/* mingw using _SSIZE_T_ to declare ssize_t type */
-#ifndef _SSIZE_T_
-#  define _SSIZE_T_
+/* mingw using _SSIZE_T_DEFINED to declare ssize_t type */
+#ifndef _SSIZE_T_DEFINED
+#  define _SSIZE_T_DEFINED
 /* python uses HAVE_SSIZE_T */
 #  ifndef HAVE_SSIZE_T
 #    define HAVE_SSIZE_T 1
diff -Naur blender/source/blender/datatoc/datatoc_icon.c blender-pp/source/blender/datatoc/datatoc_icon.c
--- blender/source/blender/datatoc/datatoc_icon.c	2014-01-14 00:28:37.429200000 +0400
+++ blender-pp/source/blender/datatoc/datatoc_icon.c	2014-01-13 21:52:14.173000000 +0400
@@ -32,7 +32,7 @@
 #include "../blenlib/BLI_sys_types.h"
 
 /* for DIR */
-#if !defined(WIN32) || defined(__MINGW64__)
+#if !defined(WIN32) || defined(__MINGW64_VERSION_MAJOR)
 #  include <dirent.h>
 #endif
 
