From 8bda0d08e3c2415d5890e9b935d8cb6f5a202dc0 Mon Sep 17 00:00:00 2001
From: Roumen Petrov <local@example.net>
Date: Sat, 23 Feb 2013 19:50:16 +0200
Subject: [PATCH 08/16] MINGW: add $srcdir/PC to CPPFLAGS

---
 configure.ac | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/configure.ac b/configure.ac
index eb93a71..441c377 100644
--- a/configure.ac
+++ b/configure.ac
@@ -4680,6 +4680,16 @@ do
   THREADHEADERS="$THREADHEADERS \$(srcdir)/$h"
 done
 
+case $host in
+  *-*-mingw*)
+    dnl Required for windows builds as Objects/exceptions.c require
+    dnl "errmap.h" from $srcdir/PC.
+    dnl Note we cannot use BASECPPFLAGS as autogenerated pyconfig.h
+    dnl has to be before customized located in ../PC.
+    CPPFLAGS="-I\$(srcdir)/PC $CPPFLAGS"
+    ;;
+esac
+
 AC_SUBST(SRCDIRS)
 SRCDIRS="Parser Grammar Objects Python Modules Mac"
 AC_MSG_CHECKING(for build directories)
-- 
1.7.12.1