From 1af4bcfbc3b141dbcf1703b1b5a2e0950e8c89d0 Mon Sep 17 00:00:00 2001
From: Roumen Petrov <local@example.net>
Date: Thu, 21 Mar 2013 21:55:09 +0200
Subject: [PATCH 23/24] MINGW: customize site

---
 Lib/site.py | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/Lib/site.py b/Lib/site.py
index 96a4bef..540aa3a 100644
--- a/Lib/site.py
+++ b/Lib/site.py
@@ -267,6 +267,12 @@ def getusersitepackages():
             USER_SITE = get_path('purelib', 'osx_framework_user')
             return USER_SITE
 
+    if sys.platform == 'win32':
+        from sysconfig import _POSIX_BUILD
+        if _POSIX_BUILD:
+            USER_SITE = get_path('purelib', 'posix_user')
+            return USER_SITE
+
     USER_SITE = get_path('purelib', '%s_user' % os.name)
     return USER_SITE
 
@@ -298,14 +304,15 @@ def getsitepackages(prefixes=None):
     if prefixes is None:
         prefixes = PREFIXES
 
+    from sysconfig import _POSIX_BUILD
     for prefix in prefixes:
         if not prefix or prefix in seen:
             continue
         seen.add(prefix)
 
         if sys.platform in ('os2emx', 'riscos'):
             sitepackages.append(os.path.join(prefix, "Lib", "site-packages"))
-        elif os.sep == '/':
+        elif _POSIX_BUILD:
             sitepackages.append(os.path.join(prefix, "lib",
                                         "python" + sys.version[:3],
                                         "site-packages"))
-- 
1.7.12.1
