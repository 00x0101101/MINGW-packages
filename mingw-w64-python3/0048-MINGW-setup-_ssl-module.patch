From 0ae5e927a4e802659f26ff65454178ec4565cc21 Mon Sep 17 00:00:00 2001
From: Roumen Petrov <local@example.net>
Date: Sun, 10 Mar 2013 02:04:51 +0200
Subject: [PATCH 18/24] MINGW: setup _ssl module

require working find_library_file method
---
 setup.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/setup.py b/setup.py
index 20eb135..7e6cd83 100644
--- a/setup.py
+++ b/setup.py
@@ -792,10 +792,13 @@ class PyBuildExt(build_ext):
 
         if (ssl_incs is not None and
             ssl_libs is not None):
+            _ssl_libs = ['ssl', 'crypto']
+            if host_platform.startswith(('mingw', 'win')):
+                _ssl_libs += ['ws2_32']
             exts.append( Extension('_ssl', ['_ssl.c'],
                                    include_dirs = ssl_incs,
                                    library_dirs = ssl_libs,
-                                   libraries = ['ssl', 'crypto'],
+                                   libraries = _ssl_libs,
                                    depends = ['socketmodule.h']), )
         else:
             missing.append('_ssl')
-- 
1.7.12.1
