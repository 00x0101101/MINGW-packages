From b3ab8d0dcac33de379839e908ce5693847f669a5 Mon Sep 17 00:00:00 2001
From: Roumen Petrov <local@example.net>
Date: Tue, 12 Feb 2013 01:26:14 +0200
Subject: [PATCH 02/24] issue17219: add current dir in library path if
 building python standard extensions

---
 Lib/distutils/command/build_ext.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Lib/distutils/command/build_ext.py b/Lib/distutils/command/build_ext.py
index 0eba00e..5ae4f77 100644
--- a/Lib/distutils/command/build_ext.py
+++ b/Lib/distutils/command/build_ext.py
@@ -246,7 +246,7 @@ class build_ext(Command):
         # Python's library directory must be appended to library_dirs
         # See Issues: #1600860, #4366
         if (sysconfig.get_config_var('Py_ENABLE_SHARED')):
-            if sys.executable.startswith(os.path.join(sys.exec_prefix, "bin")):
+            if not sysconfig.python_build:
                 # building third party extensions
                 self.library_dirs.append(sysconfig.get_config_var('LIBDIR'))
             else:
-- 
1.7.12.1
