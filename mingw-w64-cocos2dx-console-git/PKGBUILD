# Maintainer: Martell Malone <martellmalone@gmail.com>

_realname=cocos2d-x-console
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}-git"
pkgver=r452.8e158e1
pkgrel=1
pkgdesc="cocos2d command line tool (mingw-w64)"
arch=('any')
url="http://www.cocos2d-x.org/"
license=("MIT")
provides=("${MINGW_PACKAGE_PREFIX}-${_realname}")
conflicts=("${MINGW_PACKAGE_PREFIX}-${_realname}")
depends=("${MINGW_PACKAGE_PREFIX}-cocos2d-x"
         "${MINGW_PACKAGE_PREFIX}-cmake")

options=('staticlibs' 'strip')
source=("${_realname}"::"git+git://github.com/martell/cocos2d-console.git#branch=msys2")
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/$_realname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

prepare() {
  
}

#build() {
#  cd "$srcdir/$_realname/cocos"
#}

package() {
  mkdir -p "${pkgdir}${MINGW_PREFIX}/bin"

  cp -r $srcdir/$_realname/bin/cocos.py ${pkgdir}${MINGW_PREFIX}/bin
  cp -r $srcdir/$_realname/bin/cocos ${pkgdir}${MINGW_PREFIX}/bin
  cp -r $srcdir/$_realname/bin/cocos_project.py ${pkgdir}${MINGW_PREFIX}/bin

  mkdir -p "${pkgdir}${MINGW_PREFIX}/share/cocos2d-x/console"
  cp -r $srcdir/$_realname/bin/cocos2d.ini ${pkgdir}${MINGW_PREFIX}/share/cocos2d-x/console
  cp -r $srcdir/$_realname/plugins/ ${pkgdir}${MINGW_PREFIX}/share/cocos2d-x/console/

}
